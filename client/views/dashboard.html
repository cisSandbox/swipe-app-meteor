<!-- MAIN TEMPLATE -->
<template name="dashboard">
    <div class="sandbox-logo">
        <img src="/logo.png">
    </div>
    <h2>
        Hello, {{currentUser.profile.name}}
    </h2>
    <div class="container-fluid">
        <div class="row-fluid show-grid">
            <div class="span3 background-gray">
                <h4>Quick Links</h4>
                <br />
                {{#if canTutor}}}
                <button class="btn btn-large btn-block {{#if currentlyTutoring}}btn-danger{{else}}btn-success{{/if}}" id="tutorButton">
                    {{#if currentlyTutoring}}Stop Working{{else}}Start Working{{/if}}
                </button>
                {{/if}}
                <button class="btn btn-large btn-block btn-primary" id="tutorqueue">Tutor Queue</button>
                {{#if isAdmin}}
                <button class="btn btn-large btn-block btn-primary" id="tapoutqueue">Tapout Queue</button>
                <button class="btn btn-large btn-block btn-primary" id="swipescreen">Swipe Screen</button>
                {{/if}}
                <button class="btn btn-large btn-block btn-danger" id="logout">Logout</button>
                <br />
                <a href="http://blackboard.bentley.edu" class="btn btn-block" target="_blank">Blackboard Site</a>
                <a href="http://cis.bentley.edu/sandbox" class="btn btn-block" target="_blank">Sandbox Blog</a>
            </div>
            <div class="span9">{{> maindashboard}}</div>
        </div>
    </div>
</template>

<!-- MAIN ADMIN DASHBOARD TEMPLATE -->
<template name="maindashboard">
    <div class="tabbable"> <!-- Only required for left/right tabs -->
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">My Profile</a></li>
            <li><a href="#tab2" data-toggle="tab">Tutor History</a></li>
            <li><a href="#tab3" data-toggle="tab">My Hours</a></li>
            <li><a href="#tab6" data-toggle="tab">Student Lookup</a></li>
            {{#if isAdmin}}
            <li><a href="#tab4" data-toggle="tab">Manage Users</a></li>
            <li><a href="#tab5" data-toggle="tab">Add User</a></li>
            <li><a href="#tab7" data-toggle="tab">Admin Reports</a></li>
            <li><a href="#tab8" data-toggle="tab">Tutor Hours</a></li>
            {{/if}}
        </ul>
        <div class="tab-content background-gray">
            <div class="tab-pane active" id="tab1">
                {{> profile}}
            </div>
            <div class="tab-pane" id="tab2">
                {{> tutorhistory}}
            </div>
            <div class="tab-pane" id="tab3">
                {{> hoursWorked}}
            </div>
            <div class="tab-pane" id="tab6">
                {{> studentHistory}}
            </div>
            {{#if isAdmin}}
            <div class="tab-pane" id="tab4">
                {{> editusers}}
            </div>
            <div class="tab-pane" id="tab5">
                {{> createuser}}
            </div>
            <div class="tab-pane" id="tab7">
                {{> adminReports}}
            </div>
            
            <div class="tab-pane" id="tab8">
                
                {{> tutorHours}}
                
            </div>
            
            {{/if}}
        </div>
    </div>
</template>

<template name="tutorhistory">
    <legend>My Tutor History</legend>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Student Name</th>
                <th>Course</th>
                <th>Session Duration</th>
                <th>Activity Description</th>
            </tr>
        </thead>
        <tbody>
            {{#each tutoredVisits}}
            <tr>
                <td>{{name}}</td>
                <td>{{course}}</td>
                <td>{{duration}}</td>
                <td>{{description}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</template>

<template name="profile">
    {{> edituser}}
</template>

<template name="edituser">
    <form class="form-horizontal" id="editUserForm">
        <legend>Edit Profile</legend>
        <div class="control-group">
            <div class="controls">
                {{#if currentUser.profile.picture}}
                    <img src="/{{currentUser.profile.picture}}" class="profile-picture" />
                {{else}}
                    <img data-src="holder.js/300x200" alt="300x200" style="width: 300px; height: 200px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADICAYAAABS39xVAAAL0klEQVR4Xu3baY8UZRcG4MJ9XwFF/GAIxj1BBIQI6l83uBGMSzRRQaPiEgUdNCIgLrw5lVSngoNOj95vODNXfYKZp0+fvs7DnarqYsvKysrlwUGAAIEGAlsEVoMpaZEAgVFAYNkIBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVBolQEBg2QMECLQREFhtRqVRAgQElj1AgEAbAYHVZlQaJUBAYNkDBAi0ERBYbUalUQIEBJY9QIBAGwGB1WZUGiVAQGDZAwQItBEQWG1GpVECBASWPUCAQBsBgdVmVFdv9PLly8Nnn302fPfdd8OlS5eGLVu2DPfdd9+we/fu4ZZbbvnLC7/44ovhm2++GdfWcffdd49r77jjjn+1dhnKU6dODV9//fWih3vvvXd49NFHh1tvvfVf9bDMZ1umX2uvDQGBdW3MYd1dVFi9+eabwy+//LJqjX379g333HPP4nfvv//+GGyrHQcOHBjuuuuuda1d5gMcP358+Omnn1Z9ydNPPz08+OCD6+phmc+2TL/WXjsCAuvamcW6Ovnyyy+Hjz/+eHzt9ddfP2zbtm34/vvvh99//3382W233TYcOnRoPOv68ccfh7feemvxPjt27BiD4/z58+PP6gzr+eefX3rtMo3P+63X1ZnVzz//vOi3+nzxxReHG2+88Zrod5nPZm1eQGDljaPvUGdX586dG9+jgun2228fL7NeffXV4c8//xzD5/Dhw8PNN988fPTRR8NXX301rq1LwEceeWT4448/hqNHjy4Co9bWZeRa11aw1OVlvU+d7dWlaPVQRwXnxYsXxz9Xza1btw7zs6Ann3xyeOihh8bXzc8Sn3rqqaHCdK09LNPvapfI0QEp/p8KCKz/lPP/X+y9994bLwfr3s+ePXsWwVGB9euvvw7XXXfd8NJLL41nX2+88ca4dh5i1fGJEyeGuqdUxxQWa11bl2+vv/76cOHChUUwvfDCC2NQvfbaawuQxx9/fNi5c+cYpNVXHUeOHBmDtI5PP/10vA+3nh4q3Nbab6119BUQWH1n95fOf/vttzEMKnzqrKeOusw7ePDgeBYzD5YKlekG9zywnnnmmWH79u1rXvvAAw+MYVW16z3qeOKJJ8azqzNnzox/v//++4dnn312/HMFZp3VVZDOb/LPzxTr9XXmlep3A418030UgbWBRj6/hJo+1hRM88vEOtuqs64KjTrmgbVr167h4YcfXlxS/tPaWl9HfTt38uTJv2jW2Vy91w033HBV6fn71/rquXqbLmv/qYf19LuBxr6pPorA2kDjnv/Dnz5WPbJQ3xTW2dcUAHUfp0KhwuHKwKozpscee2zNa+uMrI46uzp27Njiftr0/vX7qrnaUWda77zzznhzfTqme2vzgE30u4HGvqk+isDaQOOum+z17WBdin344YeLT1ahUTe8p5vr01nMdAP6yntYdUm41rXze0J1uVf3kqZjuhxdjXhlZWV49913xy8GpqPO1qYztvmXAal+N9DoN81HEViNR13/2OsxgTq7qUuuujSajnrUoX5Xx3QjfX6faPo2sH7/ySefDJ9//vm6107vOa9TP6ugqftn07eG07oKq7fffnvRa/VeXxjMnxerX6b7bTz6Tdu6wGo8+jqbeuWVV8bAqns+L7/88uK+1PzxgSmwKiQqLOqYPyRal2U//PDD+PP9+/ePT74vs7ZeV89z1QOhVx7zZ7vqd/NLvfp7nc3VGeB0eTp//TI9LLO28cg3fesCq/kWqG/Spgc/6/Ks7gGdPn168TBpfbznnntufECz/ivMdKlYz0/VQ6K1ti4J66gznXrUoG5yL7O2AnP+uEI9vFoBOF3uTfel6j0++OCD4dtvv12o19rp28X6Yb2mng+r57mW6WGZtc1HvqnbF1jNxz//h7raR6l/+Hv37h1/deVDoleunwfLMmvn305OZ3r1aEVdIk7H9FDr9LzU37FPZ4TL9LDM2uYj39TtC6wNMP66/zQPh+kj1bNM9UzT/HKrLsnq27zp4c1pbZ3VVGDNj7Wsrafs617TdNT71QOiV5511f9RrDO9+VP1V6Of/3/CtfQw1Vlm7QYY+6b8CAJrg4y9LqXqW7oKogqoO++8c7jpppuu+unOnj07PupQR4XJ3/2XlWXWpjiX6WGZtal+1c0ICKyMq6oECAQEBFYAVUkCBDICAivjqioBAgEBgRVAVZIAgYyAwMq4qkqAQEBAYAVQlSRAICMgsDKuqhIgEBAQWAFUJQkQyAgIrIyrqgQIBAQEVgBVSQIEMgICK+OqKgECAQGBFUBVkgCBjIDAyriqSoBAQEBgBVCVJEAgIyCwMq6qEiAQEBBYAVQlCRDICAisjKuqBAgEBARWAFVJAgQyAgIr46oqAQIBAYEVQFWSAIGMgMDKuKpKgEBAQGAFUJUkQCAjILAyrqoSIBAQEFgBVCUJEMgICKyMq6oECAQEBFYAVUkCBDICAivjqioBAgEBgRVAVZIAgYyAwMq4qkqAQEBAYAVQlSRAICMgsDKuqhIgEBAQWAFUJQkQyAgIrIyrqgQIBAQEVgBVSQIEMgICK+OqKgECAQGBFUBVkgCBjIDAyriqSoBAQEBgBVCVJEAgIyCwMq6qEiAQEBBYAVQlCRDICAisjKuqBAgEBARWAFVJAgQyAgIr46oqAQIBAYEVQFWSAIGMgMDKuKpKgEBAQGAFUJUkQCAjILAyrqoSIBAQEFgBVCUJEMgICKyMq6oECAQEBFYAVUkCBDICAivjqioBAgEBgRVAVZIAgYyAwMq4qkqAQEBAYAVQlSRAICMgsDKuqhIgEBAQWAFUJQkQyAgIrIyrqgQIBAQEVgBVSQIEMgICK+OqKgECAQGBFUBVkgCBjIDAyriqSoBAQEBgBVCVJEAgIyCwMq6qEiAQEBBYAVQlCRDICAisjKuqBAgEBARWAFVJAgQyAgIr46oqAQIBAYEVQFWSAIGMgMDKuKpKgEBAQGAFUJUkQCAjILAyrqoSIBAQEFgBVCUJEMgICKyMq6oECAQEBFYAVUkCBDICAivjqioBAgEBgRVAVZIAgYyAwMq4qkqAQEBAYAVQlSRAICMgsDKuqhIgEBAQWAFUJQkQyAgIrIyrqgQIBAQEVgBVSQIEMgICK+OqKgECAQGBFUBVkgCBjIDAyriqSoBAQEBgBVCVJEAgIyCwMq6qEiAQEBBYAVQlCRDICAisjKuqBAgEBARWAFVJAgQyAgIr46oqAQIBAYEVQFWSAIGMwP8AB1kiOosayrQAAAAASUVORK5CYII=">
                {{/if}}
                <br />
                <input type="file" id="editPicture" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="editUserName">Name</label>
            <div class="controls">
                <input type="text" id="editUserName" placeholder="Name" value="{{currentUser.profile.name}}">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="editCourses">Courses</label>
            <div class="controls">
                {{#each courses}}
                    {{> courseselect}}
                {{/each}}
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button type="submit" class="btn btn-primary" id="editUserSubmit">Save</button>
            </div>
        </div>
    </form>
    <form class="form-horizontal" id="changePassword">
        <legend>Change Password</legend>
        <div class="control-group">
            <label class="control-label" for="oldPassword">Old Password:</label>
            <div class="controls">
                <input type="password" id="oldPassword" value="">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="newPassword">New Password:</label>
            <div class="controls">
                <input type="password" id="newPassword" value="">
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button type="submit" class="btn btn-primary" id="saveNewPassword">Submit</button>
            </div>
        </div>
    </form>
</template>

<!-- TUTOR SELECT TEMPLATE -->
<template name="courseselect">
    <label class="checkbox inline">
        <input type="checkbox" class="canTutor" id="inlineCheckbox{{abbr}}" {{#if selected}}}checked{{/if}} value="{{abbr}}"> {{abbr}}
    </label>
</template>


<template name="editusers">
    <legend>Manage Users</legend>
    <table class="table table-bordered">
        <thead>
            <tr>
                <!-- <th>ID</th> -->
                <th>Name</th>
                <th>Email</th>
                <th>Role(s)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {{#each users}}
                {{> userstable}}
            {{/each}}
        </tbody>
    </table>
</template>

<template name="userstable">
    <tr>
        <!-- <td>{{_id}}</td> -->
        <td>{{profile.name}}</td>
        <td>
            {{#each emails}}
                {{address}}
            {{/each}}
        </td>
        
        <!--Change by Zhe-->
        <!--this._id is the id for each select_mode role td-->
        <!--@this._id is the id for each regular_role_display td-->
        <!--@@this._id is the id for the select tag in each select_mode_role td-->
        
        
        <td class = "hidden" name="select_mode_role_display" id={{this._id}}>
               <div class="controls">
                    <select  id=@@{{this._id}} class="updateUserRoles">
                        {{#each roles_option}}
                            <option id=@@{{this._id}}{{name}}   class="selectable_options" value="{{name}}">{{name}}</option>
                        {{/each}}
                    </select>
               </div>
            
        </td>
        
       
        
        <td name="regular_role_display" id=@{{this._id}}>
            
               {{ roles}}
        </td>
        
        <!--Change by Zhe ends-->
        
        <td>
            <!--Button added by Zhe-->
            <button class="btn btn-danger changeRole" id=@@@{{this._id}}>Change Role</button>
            <button class="btn btn-danger confirm hidden" id=@@@@{{this._id}}>confirm</button>
            <!--till here-->
            
            
            <button class="btn btn-danger" id="deleteUser">Delete User</button>
            {{#if isWorking}}
            <button class="btn btn-danger" id="stopworking">Stop Working</button>
            {{/if}}
            <!-- <button class="btn btn&#45;info" id="editUser">Edit User</button> -->
        </td>
    </tr>
</template>

<template name="createuser">
    <legend>Create New User</legend>
    <form class="form-horizontal" id="createUserForm">
        <div class="control-group">
            <label class="control-label" for="createUserEmail">Email</label>
            <div class="controls">
                <input type="text" id="createUserEmail" placeholder="Email">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="createUserShortname">Shortname</label>
            <div class="controls">
                <input type="text" id="createUserShortname" placeholder="Shortname">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="createUserName">Name</label>
            <div class="controls">
                <input type="text" id="createUserName" placeholder="Name">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="createUserRole">Role</label>
            <div class="controls">
                <select id="createUserRole">
                    {{#each roles}}
                    <option value="{{name}}">{{name}}</option>
                    {{/each}}
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="createUserPassword">Password</label>
            <div class="controls">
                <input type="password" id="createUserPassword" placeholder="Password">
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button type="submit" class="btn btn-success" id="createUserSubmit">Submit</button>
            </div>
        </div>
    </form>
</template>

<!-- MAIN PROFESSORS DASHBOARD -->
<template name="professordashboard"></template>

<!-- REPORTING TEST DASHBOARD -->
<template name="hoursWorked">
    <legend>Hours Worked, Please Pick the time period(past 14 days by default)</legend>
    
    
    
        <p class="date_section_header">From</p>
        <input class="date_section" id="start_date_single_userhour" type="date">
        
        <p class="date_section_header">To</p>
        <input class="date_section" id="to_date_single_userhour" type="date">
    
        <button class="btn btn-success btn-position" id="go_button_single_userhour">GO</button>
    
    <table class="table table-striped table-bordered">
        <tr>
            <th>Day</th>
            <th>Time In</th>
            <th>Time Out</th>
            <th>Hours Worked</th>
        </tr>
        {{#each dayWorked}}
            <tr>
                <td>{{day}}</td>
                <td>{{timeIn}}</td>
                <td>{{timeOut}}</td>
                <td>{{diff}}</td>
            </tr>
        {{/each}}
    </table>
</template>

<template name="studentHistory">
    <legend>Student History</legend>
    <div class="input-append">
        <input type="text" id="studentLookupTxt" placeholder="Student Full Name"/>
        <button id="studentLookupBtn" class="btn btn-primary" type="submit"><i class="icon-search icon-white"></i> Search</button>    
    </div>
    <table class="table table-striped table-bordered">
        <tr>
            <th width="15%">Date</th>
            <th width="10%">Course</th>
            <th width="20%">Tutored By</th>
            <th width="*">Notes</th>
        </tr>
        {{#each tutorSession}}
            <tr>
                <td>{{date}}</td>
                <td>{{course}}</td>
                <td>{{tutoredBy}}</td>
                <td>{{notes}}</td>
            </tr>
        {{/each}}        
    </table>
</template>

<template name="adminReports">
    <legend>Administrative Reports</legend>
    <legend>Swipes</legend>
    <table class="table table-striped table-bordered">
        
          <tr>
            <th width="20%">Year</th>
            <th width="20%">Fall</th>
            <th width="20%">Spring</th>
            <th width="20%">Action</th>
            <th width="20%">Link</th>
          </tr>             

        

            <tr>
                <td>{{year}}</td>
                <td>{{fall_swipes}}</td>
                <td>{{spring_swipes}}</td>
                <td><button id = "swipes">Generate Link</button></td>
                <td><a id = "swipes_download" class="hidden">Export to CSV</a></td>
            </tr>
            
      
        
    </table>
    
    <legend>Tutored visits</legend>
    <table class="table table-striped table-bordered">
        
          <tr>
            <th width="20%">Year</th>
            <th width="20%">Fall</th>
            <th width="20%">Spring</th>
            <th width="20%">Action</th>
            <th width="20%">Link</th>
          </tr>             

        

            <tr>
                <td>{{year}}</td>
                <td>{{fall_tutoredVisits}}</td>
                <td>{{spring_tutoredVisits}}</td>
                <td><button id = "tutored_visits">Generate Link</button></td>
                <td><a id="tutored_visits_link" class="hidden">Export to CSV</a></td>
            </tr>
            
        
        
    </table>
    
    
    
    
    
    <div class="alert alert-error" id = "comparisonCharts"> Course Hotness Bar <br>
    
        <canvas id="myChart" width="400" height="400"></canvas>
    </div>
    
   
</template>

<template name = "Course_Radio_Group">
       
    <div class="control-group">
            <label class="control-label">Course Hotness Chart</label>
            <div class="controls">
                {{#each coursesList}}
                    {{> courseInComparisonList}}
                {{/each}}
            </div>
    </div>
    <div class="control-group">
            <div class="controls">
                <button class="btn btn-primary" id="generateCharts">GO</button>
            </div>
    </div>
    
    
</template>

<template name="courseInComparisonList">
    <label class="checkbox inline">
        <input type="checkbox" name ="course_radio_buttons" class="canTutor" id="courseList{{abbr}}" value="{{abbr}}"> {{abbr}}
    </label>
</template>

<template name="tutorHours">
    
    
    
    <legend>Manage User Hours</legend>
    
    
        <p class="date_section_header">From</p>
        <input class="date_section" id="start_date" type="date">
        
        <p class="date_section_header">To</p>
        <input class="date_section" id="to_date" type="date">
    
        <button class="btn btn-success btn-position" id="go_button">GO</button>
        <button class="btn btn-success btn-position hidden" id="email_all">Email_all_hours</button>
    
    
    
    
    <table class="table table-striped table-bordered" id="general_table">
        
        
        
    </table>
    
    
     <table class="table table-striped table-bordered" id="identity_table">
       
       
       
     </table>
     
     
     <table class="table table-striped table-bordered" id="individual_table">
       
     </table>
    
    
    

</template>


<!--table for all of the hours that a user had worked-->
<template name ="tutorHourstable">
    
    
    <tr>
        <td>{{_id}}</td>
        <td>{{profile.name}}</td>
        <td><a href="#">
            {{#each emails}}
                {{address}}
            {{/each}}
            </a>
        </td>
        
        <td>
              20
        </td>
        
        <!--Change by Zhe ends-->
        
        <td>
            <!--Button added by Zhe-->
            <button id={{this._id}} class="btn btn-danger detail">Detail</button>
        </td>
    </tr>
    
</template>


<template name="individual_hours_worked">
    
     <tr>
            <th>Day</th>
            <th>Time In</th>
            <th>Time Out</th>
            <th>Hours Worked</th>
        </tr>
        <tbody>
            {{#each dayworked}}
                {{> individual_hours_worked}}
            {{/each}}
        </tbody>
    
     
            <tr>
                <td>{{day}}</td>
                <td>{{timeIn}}</td>
                <td>{{timeOut}}</td>
                <td>{{diff}}</td>
            </tr>
      
    
    
</template>








